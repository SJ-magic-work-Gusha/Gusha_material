/************************************************************
************************************************************/
#pragma once

/************************************************************
************************************************************/
#include "ofMain.h"
#include "ofxSyphon.h"

#include "sj_common.h"

/************************************************************
************************************************************/

/**************************************************
**************************************************/
class SJ_VIDEO_CAM : Noncopyable{
private:
	/****************************************
	****************************************/
	enum{
		VIDEO_WIDTH = 640,
		VIDEO_HEIGHT = 360,
	};
	
	/****************************************
	****************************************/
	ofFbo fbo;
	ofxSyphonServer fbo_SyphonServer;
	int c_syphon;
	
	ofVideoGrabber *VideoCam;
	
	/****************************************
	****************************************/
	void Clear_fbo();
	void draw_to_fbo();

public:
	/****************************************
	****************************************/
	SJ_VIDEO_CAM();
	~SJ_VIDEO_CAM();
	
	void setup(int _Cam_id);
	void update();
	void draw();
	void publish_syphon();
};
